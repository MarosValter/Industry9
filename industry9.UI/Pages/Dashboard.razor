@page "/dashboard"

@layout MainLayout
@attribute [Authorize]

@inject AppState AppState

<h1>Dashboard</h1>

<p>
    Expecting to see a bunch of flashy charts then you download the repo and delete them all because you don't need them? <br />
    Check out <a href="https://github.com/Joelius300/ChartJSBlazor" target="_blank">https://github.com/Joelius300/ChartJSBlazor</a> and you will find a great resource for animated charts for a dashboard.<br />
</p>
<hr />
<h2>Counter</h2>

<MatFAB icon="exposure_plus_1" @onclick="@IncrementCount"></MatFAB>

<p>
    Current Page Count: <strong>@_currentCount</strong>
    <br />
    Current User Profile / Persistent Count: <strong>@if (_profileCurrentCount != -1){@_profileCurrentCount}</strong>
</p>

<p>
    There is a "User Profile" for persistant user data built into Blazor Boilerplate. This is a bit of hack until Microsoft or others create that functionality.
    Currently we store Sidebar Navigation settings, Count. In the future I would like to track the users last page but I don't see much for <br />
</p>

@code {
    int _currentCount;
    int _profileCurrentCount = -1;

    protected override async Task OnInitializedAsync()
    {
        _profileCurrentCount = await AppState.GetUserProfileCount();
    }

    public async Task IncrementCount()
    {
        _currentCount++;
        _profileCurrentCount++;
        await AppState.UpdateUserProfileCount(_profileCurrentCount);
    }
}
